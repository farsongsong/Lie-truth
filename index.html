<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>ì¥ë‚œê° ê±°ì§“ë§ íƒì§€ê¸°</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  touch-action: manipulation;
}

body {
  background: #111;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#app {
  width: 100%;
  height: 100%;
  background: #2c2c2c;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* ì¥ë‚œê° ë³¸ì²´ */
.machine {
  width: 320px;
  height: 420px;
  background: linear-gradient(#d22, #a00);
  border-radius: 30px;
  padding: 20px;
  box-shadow: inset 0 -10px 0 rgba(0,0,0,0.3);
}

/* LED */
.leds {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
}

.led {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #333;
  box-shadow: inset 0 0 5px black;
}

/* íŒ¨ë“œ */
.pad {
  width: 100%;
  height: 160px;
  background: #111;
  border-radius: 20px;
  margin: 20px 0;
  box-shadow: inset 0 0 20px black;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #aaa;
  font-size: 18px;
  text-align: center;
}

/* ê²°ê³¼ */
.result {
  font-size: 32px;
  font-weight: bold;
  margin-top: 10px;
  color: white;
}

/* ì• ë‹ˆë©”ì´ì…˜ */
.blink {
  animation: blink 0.2s infinite;
}

@keyframes blink {
  0% { opacity: 1 }
  50% { opacity: 0.2 }
  100% { opacity: 1 }
}
</style>
</head>

<body>
<div id="app">
  <div class="machine">
    <div class="leds">
      <div class="led"></div>
      <div class="led"></div>
      <div class="led"></div>
      <div class="led"></div>
    </div>

    <div class="pad" id="pad">
      ì†ì„ ì˜¬ë¦¬ì„¸ìš”
    </div>

    <div class="result" id="result"></div>
  </div>
</div>

<script>
const pad = document.getElementById("pad");
const leds = document.querySelectorAll(".led");
const result = document.getElementById("result");

let running = false;

/* ğŸ”Š ë¹°ë¹ ë¹ ë¹° ì†Œë¦¬ ìƒì„± (íŒŒì¼ í•„ìš” ì—†ìŒ) */
function playSound() {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  let t = ctx.currentTime;

  [440, 660, 880, 660].forEach(freq => {
    const osc = ctx.createOscillator();
    osc.type = "square";
    osc.frequency.value = freq;
    osc.connect(ctx.destination);
    osc.start(t);
    osc.stop(t + 0.15);
    t += 0.18;
  });
}

/* ğŸ“³ ì§„ë™ */
function vibrateStrong() {
  if (navigator.vibrate) {
    navigator.vibrate([300, 100, 300, 100, 500]);
  }
}

/* LED íšŒì „ */
function startLeds() {
  let i = 0;
  return setInterval(() => {
    leds.forEach(l => l.style.background = "#333");
    leds[i % leds.length].style.background = "yellow";
    i++;
  }, 100);
}

/* ì‹œì‘ */
pad.addEventListener("touchstart", () => {
  if (running) return;
  running = true;

  pad.textContent = "ì¸¡ì • ì¤‘...";
  result.textContent = "";

  playSound();
  const ledTimer = startLeds();

  setTimeout(() => {
    clearInterval(ledTimer);

    const isLie = Math.random() < 0.5;

    leds.forEach(l => l.style.background = isLie ? "red" : "lime");

    if (isLie) {
      result.textContent = "ê±°ì§“ë§!";
      vibrateStrong();
    } else {
      result.textContent = "ì§„ì‹¤!";
    }

    pad.textContent = "ë‹¤ì‹œ ì† ì˜¬ë¦¬ê¸°";
    running = false;
  }, 2500);
});
</script>
</body>
</html>
